<template>
    <div class="slds-form-element">
        <div class="slds-form-element__control">
            <lightning-input
                name={inputName}
                label={inputLabel}
                onfocus={handleFocus}
                onchange={handleChange}
                oncommit={handleCommit}
                onblur={handleBlur}
                type="search"
                value={selectedValue}
                placeholder={inputPlaceholder}
                field-level-help={inputHelp}
                lwc:ref="searchInput"
            >
            </lightning-input>
            <div
                lwc:if={showOptions}
                class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid"
                role="listbox"
                lwc:ref="searchResults"
            >
                <ul
                    class="slds-listbox slds-listbox_vertical"
                    role="presentation"
                >
                    <template
                        for:each={searchResults}
                        for:item="searchResult"
                    >
                        <li
                            key={searchResult.value}
                            data-value={searchResult.value}
                            role="presentation"
                            onclick={selectSearchResult}
                            class="slds-listbox__item"
                        >
                            <div
                                class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"
                                role="option"
                            >
                                <span class="slds-media__body">
                                    <span
                                        class="slds-truncate"
                                        title={searchResult.label}
                                    >
                                        {searchResult.label}
                                    </span>
                                </span>
                            </div>
                        </li>
                    </template>
                </ul>
            </div>
        </div>
    </div>
</template>